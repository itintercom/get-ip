<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>VPN IP</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body { font-family: sans-serif; text-align:center; margin-top: 40px; }
button { padding: 10px 20px; font-size: 16px; margin-top: 20px; cursor:pointer; }
</style>
</head>
<body>
<h3>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ IP...</h3>
<div id="result">‚è≥ –ü–æ–ª—É—á–∞—é IP...</div>
<button id="sendBtn" style="display:none;">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å IP</button>
<script>
let ip = "";
fetch('https://api.ipify.org?format=json')
  .then(r=>r.json())
  .then(d=>{
    ip = d.ip;
    document.getElementById('result').innerText='–í–∞—à IP: '+ip;
    document.getElementById('sendBtn').style.display = "inline-block";
  });

document.getElementById('sendBtn').onclick = ()=>{
  if (window.Telegram && Telegram.WebApp) {
    console.log("üì§ –û—Ç–ø—Ä–∞–≤–ª—è—é IP –≤ —á–∞—Ç:", ip);
    Telegram.WebApp.sendData("/sendip " + ip);
    Telegram.WebApp.close();  // –∑–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ
  }
};
</script>
</body>
</html>
