<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>VPN IP</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body { font-family: sans-serif; text-align:center; margin-top: 40px; }
button { padding: 10px 20px; font-size: 16px; margin: 10px; cursor:pointer; }
#hint { color:#555; margin-top:15px; }
</style>
</head>
<body>
<h3>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ IP...</h3>
<div id="result">‚è≥ –ü–æ–ª—É—á–∞—é IP...</div>
<div id="buttons" style="display:none;">
  <button id="copyBtn">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å IP</button>
  <button id="sendBtn">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å IP</button>
</div>
<p id="hint">–ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞ –≤—ã –º–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–≤–∏—Ç—å IP –≤ —á–∞—Ç –∏–ª–∏ –Ω–∞–∂–∞—Ç—å ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å¬ª.</p>

<script>
let ip = "";
const botname = "intercomIPbot"; // –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –∏–º—è –≤–∞—à–µ–≥–æ –±–æ—Ç–∞

fetch('https://api.ipify.org?format=json')
  .then(r=>r.json())
  .then(d=>{
    ip = d.ip;
    document.getElementById('result').innerText='–í–∞—à IP: '+ip;
    document.getElementById('buttons').style.display = "block";
  })
  .catch(e=>{
    document.getElementById('result').innerText='–û—à–∏–±–∫–∞: '+e;
  });

// –ö–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
document.getElementById('copyBtn').onclick = async ()=>{
  try {
    await navigator.clipboard.writeText(ip);
    alert("‚úÖ IP —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!");
  } catch(err) {
    alert("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å IP");
  }
};

// –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
document.getElementById('sendBtn').onclick = ()=>{
  const link = `https://t.me/${botname}?startapp=sendip_${ip}`;
  if (window.Telegram && Telegram.WebApp) {
    Telegram.WebApp.close();
  }
  setTimeout(()=>{ window.location.href = link; }, 400);
};
</script>
</body>
</html>
