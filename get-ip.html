<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>get-ip</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <h3>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ IP...</h3>
  <div id="result">‚è≥ –ü–æ–ª—É—á–∞—é IP...</div>
  <script>
    console.log("‚úÖ Telegram WebApp –∑–∞–≥—Ä—É–∂–µ–Ω:", window.Telegram);
    fetch('https://api.ipify.org?format=json')
      .then(r => r.json())
      .then(d => {
        document.getElementById('result').innerText = "–í–∞—à IP: " + d.ip;
        if (window.Telegram && Telegram.WebApp) {
          console.log("üì§ –û—Ç–ø—Ä–∞–≤–ª—è—é IP –≤ –±–æ—Ç–∞:", d.ip);
          Telegram.WebApp.sendData(d.ip);
        } else {
          console.log("‚ö†Ô∏è Telegram WebApp –Ω–µ –Ω–∞–π–¥–µ–Ω");
        }
      })
      .catch(err => {
        document.getElementById('result').innerText = "–û—à–∏–±–∫–∞: " + err;
        console.error("‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è IP:", err);
      });
  </script>
</body>
</html>
