<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>VPN IP</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
    body { 
        font-family: Arial, sans-serif; 
        text-align: center; 
        margin-top: 40px; 
        background-color: #f5f5f5;
    }
    h3 { color: #333; }
    #result { font-size: 18px; margin: 20px 0; }
    #status { color: #555; margin-top: 15px; }
    button { 
        padding: 12px 20px; 
        font-size: 16px; 
        margin-top: 20px; 
        cursor: pointer; 
        background-color: #2ea44f;
        border: none;
        color: white;
        border-radius: 6px;
    }
</style>
</head>
<body>
    <h3>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–∞</h3>
    <div id="result">‚è≥ –ü–æ–ª—É—á–∞—é IP...</div>
    <button id="sendBtn" style="display:none;">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å IP</button>
    <div id="status"></div>

<script>
let ip = "";

// –ü–æ–ª—É—á–∞–µ–º –≤–Ω–µ—à–Ω–∏–π IP
fetch('https://api.ipify.org?format=json')
    .then(r => r.json())
    .then(d => {
        ip = d.ip;
        document.getElementById('result').innerText = '–í–∞—à IP: ' + ip;
        document.getElementById('sendBtn').style.display = "inline-block";
    })
    .catch(e => {
        document.getElementById('result').innerText = '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è IP: ' + e;
    });

// –û—Ç–ø—Ä–∞–≤–∫–∞ IP –±–æ—Ç—É —á–µ—Ä–µ–∑ WebApp API
document.getElementById('sendBtn').onclick = () => {
    if (window.Telegram && Telegram.WebApp) {
        document.getElementById('status').innerText = 'üì® –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç—É...';
        try {
            Telegram.WebApp.sendData(ip);
            Telegram.WebApp.close();
        } catch (err) {
            document.getElementById('status').innerText = '‚ùå –û—à–∏–±–∫–∞: ' + err;
        }
    } else {
        document.getElementById('status').innerText = '‚ùå Telegram API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.';
    }
};
</script>
</body>
</html>
