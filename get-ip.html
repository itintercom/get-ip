<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>VPN IP</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
<h3>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ IP...</h3>
<div id="result">‚è≥ –ü–æ–ª—É—á–∞—é...</div>
<script>
console.log("‚úÖ Telegram WebApp –æ–±—ä–µ–∫—Ç:", Telegram?.WebApp);
fetch('https://api.ipify.org?format=json')
.then(r=>r.json())
.then(d=>{
  document.getElementById('result').innerText='–í–∞—à IP: '+d.ip;
  console.log("üì§ –û—Ç–ø—Ä–∞–≤–ª—è—é –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–∞:", d.ip);
  try {
    Telegram.WebApp.sendData(d.ip);
    console.log("‚úÖ sendData –≤—ã–∑–≤–∞–Ω");
  } catch(e) {
    console.error("‚ùå –û—à–∏–±–∫–∞ sendData", e);
  }
})
.catch(e=>{
  document.getElementById('result').innerText='–û—à–∏–±–∫–∞: '+e;
  console.error("–û—à–∏–±–∫–∞ fetch", e);
});
</script>
</body>
</html>
